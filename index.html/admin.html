<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Admin Dashboard</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body{
  background:#0f0f0f;
  color:#fff;
  font-family:Arial,sans-serif;
  padding:20px;
}
h2{color:#f5c16c}
table{
  width:100%;
  border-collapse:collapse;
  margin-top:20px;
}
th,td{
  padding:12px;
  border-bottom:1px solid #333;
}
th{color:#f5c16c}
button{
  padding:6px 10px;
  border:none;
  border-radius:6px;
  cursor:pointer;
}
.confirm{background:#2ecc71}
.delete{background:#e74c3c}
.logout{
  background:#444;
  color:#fff;
  float:right;
}
.status-confirmed{
  color:#2ecc71;
  font-weight:bold;
}
</style>
</head>
<body>

<button class="logout" onclick="logout()">Logout</button>
<h2>Bookings (Admin)</h2>

<table>
<thead>
<tr>
  <th>ID</th>
  <th>Name</th>
  <th>Service</th>
  <th>Date</th>
  <th>Time</th>
  <th>Status</th>
  <th>Actions</th>
</tr>
</thead>
<tbody id="bookingTable"></tbody>
</table>

<script>
// üîê AUTH CHECK
if(sessionStorage.getItem("adminAuth") !== "true"){
  window.location.href="admin-login.html";
}

// LOAD BOOKINGS
let bookings = JSON.parse(localStorage.getItem("bookings") || "[]");
const table = document.getElementById("bookingTable");

function render(){
  table.innerHTML = "";
  if(bookings.length === 0){
    table.innerHTML = "<tr><td colspan='7'>No bookings</td></tr>";
    return;
  }

  bookings.forEach((b,index)=>{
    const row = document.createElement("tr");
    row.innerHTML = `
      <td>${b.bookingId}</td>
      <td>${b.name}</td>
      <td>${b.service}</td>
      <td>${b.date}</td>
      <td>${b.time}</td>
      <td class="${b.confirmed ? 'status-confirmed':''}">
        ${b.confirmed ? 'Confirmed' : 'Pending'}
      </td>
      <td>
        <button class="confirm" onclick="confirmBooking(${index})">‚úì</button>
        <button class="delete" onclick="deleteBooking(${index})">üóë</button>
      </td>
    `;
    table.appendChild(row);
  });
}

function confirmBooking(index){
  bookings[index].confirmed = true;
  save();
}

function deleteBooking(index){
  if(confirm("Delete this booking?")){
    bookings.splice(index,1);
    save();
  }
}

function save(){
  localStorage.setItem("bookings", JSON.stringify(bookings));
  render();
}

function logout(){
  sessionStorage.removeItem("adminAuth");
  window.location.href="admin-login.html";
}

render();
</script>

</body>
</html>
